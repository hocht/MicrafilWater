---
import CustomButton from "../CustomButton.astro";
import { useTranslations } from "@/lib/utils/i18nUtils";

const t = await useTranslations(Astro.currentLocale as string);
---

<div
  class="action-buttons pointer-events-none fixed end-0 bottom-5 z-100 flex flex-col items-end space-y-2 opacity-0 transition-all duration-300 [&.scroll-down]:pointer-events-auto [&.scroll-down]:end-5 [&.scroll-down]:opacity-100">
  <CustomButton
    label={t("helperButtons.whatsapp")}
    hoverEffect="creative-fill"
    url="https://wa.me/5214423560603"
    class="effect-color-dark btn-accent drop-shadow-2xl drop-shadow-white/10"
  />
  <CustomButton
    label={t("helperButtons.call")}
    hoverEffect="creative-fill"
    url="tel:+5214423560603"
    class="effect-color-accent btn-primary drop-shadow-2xl drop-shadow-white/10"
  />

  <script>
    function actionBtns(): void {
      const btns = document.querySelector(
        ".action-buttons",
      ) as HTMLElement | null;
      if (!btns) return;

      window.addEventListener("scroll", () => {
        const scrollTop = window.scrollY;
        const scrollBottom = scrollTop + window.innerHeight;
        const pageHeight = document.documentElement.scrollHeight;

        // Check if near the top (within 200px)
        const nearTop = scrollTop <= 200;

        // Check if near the bottom (within 200px of the end)
        const nearBottom = scrollBottom >= pageHeight - 200;

        if (nearTop || nearBottom) {
          btns.classList.remove("scroll-down");
        } else {
          btns.classList.add("scroll-down");
        }
      });
    }

    actionBtns();
  </script>
</div>
